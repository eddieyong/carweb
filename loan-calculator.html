<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Loan Calculator - CarWeb Malaysia</title>
    <meta name="description" content="Calculate your car loan monthly payments and get pre-approved today.">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-top: 76px; /* Add padding for fixed header */
        }

        .navbar {
            background: linear-gradient(to right, #ffffff, #f8f9fa);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
        }
        
        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50 !important;
        }
        
        .navbar-brand span {
            color: #3498db;
        }
        
        .nav-link {
            color: #2c3e50 !important;
            font-weight: 500;
            padding: 0.5rem 1rem !important;
            margin: 0 0.2rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover, .nav-link.active {
            color: #3498db !important;
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .calculator-section {
            padding-top: 100px;
            background: linear-gradient(to bottom, #f8f9fa, #ffffff);
        }

        .calculator-card {
            border: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
        }

        .result-card {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .form-range::-webkit-slider-thumb {
            background: #3498db;
        }

        .features-card {
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .features-card:hover {
            transform: translateY(-5px);
        }

        footer {
            background: linear-gradient(to right, #ffffff, #f8f9fa);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            padding: 2rem 0;
            margin-top: 3rem;
        }

        footer h5 {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 1.2rem;
        }

        footer p, footer li {
            color: #2c3e50;
        }

        footer a {
            color: #3498db !important;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #2980b9 !important;
        }

        footer hr {
            border-color: rgba(44, 62, 80, 0.1);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">Car<span>Web</span> Malaysia</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="car.html">Browse Cars</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="loan-calculator.html">Loan Calculator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Calculator Section -->
    <section class="calculator-section py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <h1 class="text-center mb-4">Car Loan Calculator</h1>
                    <div class="calculator-card card">
                        <div class="row g-0">
                            <div class="col-lg-8 p-4">
                                <form id="loanCalculator">
                                    <div class="d-flex justify-content-end mb-3">
                                        <button type="button" class="btn btn-link text-decoration-none" onclick="resetCalculator()">
                                            <i class="fas fa-rotate-left me-1"></i> Reset
                                        </button>
                                    </div>
                                    <div class="mb-4">
                                        <label class="form-label d-flex justify-content-between">
                                            Car Price (RM)
                                        </label>
                                        <div class="row g-2">
                                            <div class="col-12">
                                                <input type="number" class="form-control" id="carPrice" min="1000" value="100000">
                                            </div>
                                            <div class="col-12">
                                                <input type="range" class="form-range" id="carPriceRange" min="1000" max="500000" step="1000" value="100000">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="form-label d-flex justify-content-between">
                                            Down Payment
                                            <span class="text-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="Minimum 10% down payment required">
                                                <i class="fas fa-circle-info"></i>
                                            </span>
                                        </label>
                                        <div class="row g-2">
                                            <div class="col-9">
                                                <input type="number" class="form-control" id="downPaymentAmount" min="0">
                                            </div>
                                            <div class="col-3">
                                                <input type="number" class="form-control text-end" id="downPayment" min="10" max="90" value="10">
                                    
                                            </div>
                                            <div class="col-12">
                                                <input type="range" class="form-range" id="downPaymentRange" min="10" max="90" step="1" value="10">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="form-label d-flex justify-content-between">
                                            Interest Rate (%)
                                        </label>
                                        <div class="row g-2">
                                            <div class="col-12">
                                                <input type="number" class="form-control" id="interestRate" min="1" max="10" step="0.1" value="3.5">
                                            </div>
                                            <div class="col-12">
                                                <input type="range" class="form-range" id="interestRateRange" min="1" max="10" step="0.1" value="3.5">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="form-label d-flex justify-content-between">
                                            Loan Tenure (Years)
                                        </label>
                                        <div class="row g-2">
                                            <div class="col-12">
                                                <input type="number" class="form-control" id="loanTenure" min="1" max="9" value="5">
                                            </div>
                                            <div class="col-12">
                                                <input type="range" class="form-range" id="loanTenureRange" min="1" max="9" step="1" value="5">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="col-lg-4" style="background: #1e3a5f;">
                                <div class="p-4 text-white h-100 d-flex flex-column">
                                    <h5 class="mb-4">Your Estimated Monthly Payment:</h5>
                                    <div class="text-center mb-4">
                                        <div class="h6 mb-2">RM</div>
                                        <div class="display-4 fw-bold" id="monthlyPayment">1,762.50</div>
                                    </div>
                                    
                                    <!-- Loan Details -->
                                    <div class="loan-details mb-4">
                                        <div class="border-bottom border-light border-opacity-25 pb-3 mb-3">
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Principal Amount:</span>
                                                <span id="principalAmount">RM 90,000.00</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Down Payment:</span>
                                                <span id="downPaymentDisplay">RM 10,000.00</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Total Interest:</span>
                                                <span id="totalInterest">RM 15,750.00</span>
                                            </div>
                                        </div>
                                        <div class="border-bottom border-light border-opacity-25 pb-3 mb-3">
                                            <div class="d-flex justify-content-between mb-2">
                                                <span>Monthly Principal:</span>
                                                <span id="monthlyPrincipal">RM 1,500.00</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Monthly Interest:</span>
                                                <span id="monthlyInterestDisplay">RM 262.50</span>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between fw-bold">
                                            <span>Total Payment:</span>
                                            <span id="totalPayment">RM 105,750.00</span>
                                        </div>
                                    </div>

                                    <div class="mt-auto">
                                        <button type="button" class="btn btn-warning w-100" onclick="window.location.href='car.html'">
                                            Find Cars within Budget
                                        </button>
                                        <div class="mt-3 small text-light-50">
                                            Disclaimer: All interest rates and calculated amounts are estimations only. Actual amounts may differ based on your individual credit profile.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>CarWeb Malaysia</h5>
                    <p>Your trusted platform for buying and selling second-hand cars in Malaysia.</p>
                </div>
                <div class="col-md-4">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Browse Cars</a></li>
                        <li><a href="#">Sell Your Car</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>Contact Info</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-envelope me-2"></i>info@carweb.my</li>
                        <li><i class="fas fa-phone me-2"></i>+60 3-1234 5678</li>
                        <li><i class="fas fa-map-marker-alt me-2"></i>Kuala Lumpur, Malaysia</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0">&copy; 2024 CarWeb Malaysia. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Calculator Logic -->
    <script>
        // Initialize tooltips
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        })

        // Sync range inputs with number inputs
        function syncInputs(inputId, rangeId) {
            const input = document.getElementById(inputId);
            const range = document.getElementById(rangeId);
            
            input.addEventListener('input', () => {
                range.value = input.value;
                calculateLoan();
            });
            
            range.addEventListener('input', () => {
                input.value = range.value;
                calculateLoan();
            });
        }

        // Initialize input syncing
        syncInputs('carPrice', 'carPriceRange');
        syncInputs('downPayment', 'downPaymentRange');
        syncInputs('interestRate', 'interestRateRange');
        syncInputs('loanTenure', 'loanTenureRange');

        // Calculate loan
        function calculateLoan() {
            // Get input values
            const carPrice = parseFloat(document.getElementById('carPrice').value);
            const downPaymentPercent = parseFloat(document.getElementById('downPayment').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const loanTenure = parseFloat(document.getElementById('loanTenure').value);

            // Calculate down payment
            const downPayment = (carPrice * downPaymentPercent) / 100;
            document.getElementById('downPaymentAmount').value = downPayment.toFixed(2);
            
            // Calculate loan amount (Principal)
            const loanAmount = carPrice - downPayment;

            // Calculate total interest for the entire period
            const totalInterest = (interestRate / 100) * loanAmount * loanTenure;

            // Calculate monthly interest
            const monthlyInterest = totalInterest / (loanTenure * 12);

            // Calculate total amount to be paid (Principal + Total Interest)
            const totalAmount = loanAmount + totalInterest;

            // Calculate monthly installment
            const monthlyPayment = totalAmount / (loanTenure * 12);
            
            // Calculate monthly principal
            const monthlyPrincipal = loanAmount / (loanTenure * 12);

            // Format numbers for display
            const formatCurrency = (value) => {
                return value.toLocaleString('en-MY', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
            };

            // Update all displays
            document.getElementById('monthlyPayment').textContent = formatCurrency(monthlyPayment);
            document.getElementById('principalAmount').textContent = `RM ${formatCurrency(loanAmount)}`;
            document.getElementById('downPaymentDisplay').textContent = `RM ${formatCurrency(downPayment)}`;
            document.getElementById('totalInterest').textContent = `RM ${formatCurrency(totalInterest)}`;
            document.getElementById('monthlyPrincipal').textContent = `RM ${formatCurrency(monthlyPrincipal)}`;
            document.getElementById('monthlyInterestDisplay').textContent = `RM ${formatCurrency(monthlyInterest)}`;
            document.getElementById('totalPayment').textContent = `RM ${formatCurrency(totalAmount)}`;
        }

        // Reset calculator
        function resetCalculator() {
            document.getElementById('carPrice').value = 100000;
            document.getElementById('carPriceRange').value = 100000;
            document.getElementById('downPayment').value = 10;
            document.getElementById('downPaymentRange').value = 10;
            document.getElementById('interestRate').value = 3.5;
            document.getElementById('interestRateRange').value = 3.5;
            document.getElementById('loanTenure').value = 5;
            document.getElementById('loanTenureRange').value = 5;
            calculateLoan();
        }

        // Calculate initial loan value
        calculateLoan();
    </script>
</body>
</html> 